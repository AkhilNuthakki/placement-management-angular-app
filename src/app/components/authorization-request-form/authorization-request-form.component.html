<ng-container *ngIf="errorMessage">
    <app-error-message [errorMessage]="errorMessage"></app-error-message>
</ng-container>

<ng-container *ngIf="successMessage">
    <app-success-message [successMessage]="successMessage"></app-success-message>
</ng-container>

<div class="p-sm-5 pt-2 mt-2">
    <form class="form-border p-sm-4 p-3" [formGroup]="authReqForm" (ngSubmit)="onSubmit()">
            <h3 class="text-center">Placement Authorization Request Form</h3>
            <div class="p-sm-4">
                <p>
                    This form is to be completed by a University of Leicester student to notify the University of Leicester about a placement offer. By submitting this form, you request authorisation to have the role form part of your degree programme.  We will use this form to assess the placement role you have been offered. 
                </p>
            </div>
        <div>
            <hr>
            <h5 class="mb-3">Student Details</h5>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="firstName">First Name</label>
                    <input class="form-control" placeholder="First Name" type="text" id="firstName"
                        formControlName="firstName" ng-disabled [readOnly]="viewMode">
                    <div
                        *ngIf="!authReqForm.get('firstName')?.valid && (authReqForm.get('firstName')?.dirty || authReqForm.get('firstName')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('firstName')?.errors?.['required']"
                            class="text-muted">First Name is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="lastName">Last Name</label>
                    <input class="form-control" placeholder="Last Name" type="text" id="lastName"
                        formControlName="lastName" />
                    <div
                        *ngIf="!authReqForm.get('lastName')?.valid && (authReqForm.get('lastName')?.dirty || authReqForm.get('lastName')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('lastName')?.errors?.['required']"
                            class="text-muted">Last Name is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="studentNumber">Student Number</label>
                    <input class="form-control" placeholder="Student Number" type="text" id="studentNumber"
                        formControlName="studentNumber" />
                    <div
                        *ngIf="!authReqForm.get('studentNumber')?.valid && (authReqForm.get('studentNumber')?.dirty || authReqForm.get('studentNumber')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('studentNumber')?.errors?.['required']"
                            class="text-muted">Student Number is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="useremail">User Email</label>
                    <input class="form-control" placeholder="Email ID" type="text" id="useremail"
                        formControlName="useremail" />
                    <div
                        *ngIf="!authReqForm.get('useremail')?.valid && (authReqForm.get('useremail')?.dirty || authReqForm.get('useremail')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('useremail')?.errors?.['required']"
                            class="text-muted">Email is
                            required</small>
                        <small id="helpId" *ngIf="authReqForm.get('useremail')?.errors?.['email']" class="text-muted">Email
                            should be valid</small>
                    </div>
                </div>
                <div class="col-sm-6">
                    <label for="school">School</label>
                    <input class="form-control" placeholder="School" type="text" id="school"
                        formControlName="school" />
                    <div
                        *ngIf="!authReqForm.get('school')?.valid && (authReqForm.get('school')?.dirty || authReqForm.get('school')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('school')?.errors?.['required']"
                            class="text-muted">School is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="course">Programme of Study</label>
                        <select class="custom-select" formControlName="course">
                            <option value="" disabled selected>Choose your cource</option>
                            <option *ngFor="let cource of courseList" [ngValue]="cource">{{cource}}</option>
                        </select>
                    <div
                        *ngIf="!authReqForm.get('course')?.valid && (authReqForm.get('course')?.dirty || authReqForm.get('course')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('course')?.errors?.['required']"
                            class="text-muted">Programme of Study is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="telephone">Contact Telephone Number</label>
                    <input class="form-control" placeholder="Telephone" type="text" id="telephone"
                        formControlName="telephone" />
                    <div
                        *ngIf="!authReqForm.get('telephone')?.valid && (authReqForm.get('telephone')?.dirty || authReqForm.get('telephone')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('telephone')?.errors?.['required']"
                            class="text-muted">Telephone Number is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="isInternationalStudent">
                        <span class="required" *ngIf="authReqForm.get('isInternationalStudent')?.errors?.['required']">*</span>
                        Are you an international student with a Student Visa?
                    </label>
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isInternationalStudent-Yes">
                                <input type="radio" id="isInternationalStudent-Yes" formControlName="isInternationalStudent" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isInternationalStudent-No">
                                <input type="radio" id="isInternationalStudent-No" formControlName="isInternationalStudent" value="No"> No
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.isInternationalStudent == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.student?.is_international_student == 'Yes')">
                    <label for="isVisaAvailableDuringPlacement">
                        <span class="required" *ngIf="authReqForm.get('isVisaAvailableDuringPlacement')?.errors?.['required']">*</span>
                        Does your Student Visa duration account for your placement?</label>
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isVisaAvailableDuringPlacement-Yes">
                                <input type="radio" id="isVisaAvailableDuringPlacement-Yes" formControlName="isVisaAvailableDuringPlacement" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isVisaAvailableDuringPlacement-No">
                                <input type="radio" id="isVisaAvailableDuringPlacement-No" formControlName="isVisaAvailableDuringPlacement" value="No"> No
                            </label>
                        </div>
                    </div>
                    <small id="helpId" *ngIf="this.authReqForm.value.isVisaAvailableDuringPlacement == 'No'"
                            class="">Please contact <a class="theme-link">{{visaContactEmail}}</a>
                            </small>
                </div>
            </div>
        </div>
        <div>
            <hr>
            <h5 class="mb-3">Placement Provider Details</h5>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="providerName">Organization Name</label>
                    <input class="form-control" placeholder="Organization Name" type="text" id="providerName"
                        formControlName="providerName" />
                    <div
                        *ngIf="!authReqForm.get('providerName')?.valid && (authReqForm.get('providerName')?.dirty || authReqForm.get('providerName')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerName')?.errors?.['required']"
                            class="text-muted">Organization Name is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="providerWebAddress">Website Address</label>
                    <input class="form-control" placeholder="Website Address" type="text" id="providerWebAddress"
                        formControlName="providerWebAddress" />
                    <div
                        *ngIf="!authReqForm.get('providerWebAddress')?.valid && (authReqForm.get('providerWebAddress')?.dirty || authReqForm.get('providerWebAddress')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerWebAddress')?.errors?.['required']"
                            class="text-muted">Website Address is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-9">
                    <label for="providerAddress">Organization Address</label>
                    <input class="form-control" placeholder="Address" type="text" id="providerAddress"
                        formControlName="providerAddress" />
                    <div
                        *ngIf="!authReqForm.get('providerAddress')?.valid && (authReqForm.get('providerAddress')?.dirty || authReqForm.get('providerAddress')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerAddress')?.errors?.['required']"
                            class="text-muted">Organization Address is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-3">
                    <label for="providerPostcode">Postcode</label>
                    <input class="form-control" placeholder="Postcode" type="text" id="providerPostcode"
                        formControlName="providerPostcode" />
                    <div
                        *ngIf="!authReqForm.get('providerPostcode')?.valid && (authReqForm.get('providerPostcode')?.dirty || authReqForm.get('providerPostcode')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerPostcode')?.errors?.['required']"
                            class="text-muted">Postcode is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="providerContactName">Contact Name</label>
                    <input class="form-control" placeholder="Contact Name" type="text" id="providerContactName"
                        formControlName="providerContactName" />
                    <div
                        *ngIf="!authReqForm.get('providerContactName')?.valid && (authReqForm.get('providerContactName')?.dirty || authReqForm.get('providerContactName')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerContactName')?.errors?.['required']"
                            class="text-muted">Contact Name is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="providerContactJobTitle">Contact Job Title</label>
                    <input class="form-control" placeholder="Contact Job Title" type="text" id="providerContactJobTitle"
                        formControlName="providerContactJobTitle" />
                    <div
                        *ngIf="!authReqForm.get('providerContactJobTitle')?.valid && (authReqForm.get('providerContactJobTitle')?.dirty || authReqForm.get('providerContactJobTitle')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerContactJobTitle')?.errors?.['required']"
                            class="text-muted">Contact Job Title is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="providerContactEmail">Contact Email</label>
                    <input class="form-control" placeholder="Contact Email" type="email" id="providerContactEmail"
                        formControlName="providerContactEmail" />
                    <div
                        *ngIf="!authReqForm.get('providerContactEmail')?.valid && (authReqForm.get('providerContactEmail')?.dirty || authReqForm.get('providerContactEmail')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerContactEmail')?.errors?.['required']"
                            class="text-muted">Contact Email is
                            required</small>
                        <small id="helpId" *ngIf="authReqForm.get('providerContactEmail')?.errors?.['email']" class="text-muted">Email
                                should be valid</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="providerTelephone">Contact Telephone</label>
                    <input class="form-control" placeholder="Contact Telephone" type="text" id="providerTelephone"
                        formControlName="providerTelephone" />
                    <div
                        *ngIf="!authReqForm.get('providerTelephone')?.valid && (authReqForm.get('providerTelephone')?.dirty || authReqForm.get('providerTelephone')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('providerTelephone')?.errors?.['required']"
                            class="text-muted">Telephone is
                            required</small>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <hr>
            <h5 class="mb-3">Placement Role Details</h5>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="placementRoleTitle">Role Title</label>
                    <input class="form-control" placeholder="Role Title" type="text" id="placementRoleTitle"
                        formControlName="placementRoleTitle" />
                    <div
                        *ngIf="!authReqForm.get('placementRoleTitle')?.valid && (authReqForm.get('placementRoleTitle')?.dirty || authReqForm.get('placementRoleTitle')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('placementRoleTitle')?.errors?.['required']"
                            class="text-muted">Role Title is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="placementStartDate">
                        Role Start Date
                        <br>
                        <small id="helpI" class="text-muted">
                            Expected month if unknown, it can be updated later
                        </small> 
                    </label>
                    <input class="form-control" placeholder="Start Date" type="date" min="{{minRoleStartDate | date:'yyyy-MM-dd'}}" id="placementStartDate"
                        formControlName="placementStartDate" />
                    <div
                        *ngIf="!authReqForm.get('placementStartDate')?.valid && (authReqForm.get('placementStartDate')?.dirty || authReqForm.get('placementStartDate')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('placementStartDate')?.errors?.['required']"
                            class="text-muted">Start Date is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="placementEndDate">
                        Role End Date <br><small id="helpI" class="text-muted">Expected month if unknown</small> 
                    </label>
                    <input class="form-control" placeholder="End Date" type="date" id="placementEndDate"
                        formControlName="placementEndDate" />
                    <div
                        *ngIf="!authReqForm.get('placementEndDate')?.valid && (authReqForm.get('placementEndDate')?.dirty || authReqForm.get('placementEndDate')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('placementEndDate')?.errors?.['required']"
                            class="text-muted">End Date is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="workingHours">Working hours</label>
                    <input class="form-control" placeholder="hours (per week)" type="number" id="workingHours"
                        formControlName="workingHours" />
                    <div
                        *ngIf="!authReqForm.get('workingHours')?.valid && (authReqForm.get('workingHours')?.dirty || authReqForm.get('workingHours')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('workingHours')?.errors?.['required']" class="text-muted">Working Hours
                            are required</small>
                        <small id="helpId" *ngIf="authReqForm.get('workingHours')?.errors?.['min']" class="text-muted">Role is to be minimum of
                            35 hours</small>
                        <small id="helpId" *ngIf="authReqForm.get('workingHours')?.errors?.['max']" class="text-muted">Role is to be maximum of
                            48 hours</small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="salary">Salary</label>
                    <input class="form-control" placeholder="£ (per year)" type="number" id="salary"
                        formControlName="salary" />
                    <div
                        *ngIf="!authReqForm.get('salary')?.valid && (authReqForm.get('salary')?.dirty || authReqForm.get('salary')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('salary')?.errors?.['required']"
                            class="text-muted">Salary is
                            required</small>
                    </div>
                </div>
                
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="hasInformedProvider">
                        <span class="required" *ngIf="authReqForm.get('hasInformedProvider')?.errors?.['required']">*</span>
                        Have you informed the Placement Provider that this placement forms part of your degree programme?</label>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasInformedProvider-Yes">
                                <input type="radio" id="hasInformedProvider-Yes" formControlName="hasInformedProvider" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasInformedProvider-No">
                                <input type="radio" id="hasInformedProvider-No" formControlName="hasInformedProvider" value="No"> No
                            </label>
                        </div>
                    </div>
                    <div>
                        <small id="helpId" *ngIf="this.authReqForm.value.hasInformedProvider == 'No'"
                            class="text-muted">Please inform the Placement Provider before proceeding with this form
                        </small>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="hasProbationPeriod">
                        <span class="required" *ngIf="authReqForm.get('hasProbationPeriod')?.errors?.['required']">*</span>
                        Does your role include a probation period ?</label>
                        <div class="row">
                            <div class="col-sm-3">
                                <label class="radio-inline" for="hasProbationPeriod-Yes">
                                    <input type="radio" id="hasProbationPeriod-Yes" formControlName="hasProbationPeriod" value="Yes">
                                    Yes
                                </label>
                            </div>                    
                            <div class="col-sm-3">
                                <label class="radio-inline" for="hasProbationPeriod-No">
                                    <input type="radio" id="hasProbationPeriod-No" formControlName="hasProbationPeriod" value="No"> No
                                </label>
                            </div>
                        </div>
                </div>
                <div class="col-sm-4" *ngIf="this.authReqForm.value.hasProbationPeriod == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.placement_role?.has_probation_period == 'Yes')">
                    <label for="probationPeriodInWeeks">Confirm length of your probation period</label>
                    <input class="form-control" placeholder="Probation Period (In Weeks)" type="number" id="probationPeriodInWeeks"
                        formControlName="probationPeriodInWeeks" />
                    <div
                        *ngIf="!authReqForm.get('probationPeriodInWeeks')?.valid && (authReqForm.get('probationPeriodInWeeks')?.dirty || authReqForm.get('probationPeriodInWeeks')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('probationPeriodInWeeks')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="sourceOfRole">Source of Role</label>
                    <select class="custom-select" formControlName="sourceOfRole">
                        <option value="" disabled selected>Choose your source</option>
                        <option *ngFor="let source of sourceRoleList" [ngValue]="source">{{source}}</option>
                      </select>
                    <div
                        *ngIf="!authReqForm.get('sourceOfRole')?.valid && (authReqForm.get('sourceOfRole')?.dirty || authReqForm.get('sourceOfRole')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('sourceOfRole')?.errors?.['required']"
                            class="text-muted">Source of role is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-4" *ngIf="this.authReqForm.value.sourceOfRole == 'Other' || (this.viewMode == true && this.placementAuthorizationRequest?.placement_role?.source_of_role == 'Other')">
                    <label for="otherSourceOfRole">Please provide other source</label>
                    <input class="form-control" placeholder="Please provide other source" type="text" id="otherSourceOfRole"
                    formControlName="otherSourceOfRole" />
                    <div
                        *ngIf="!authReqForm.get('otherSourceOfRole')?.valid && (authReqForm.get('otherSourceOfRole')?.dirty || authReqForm.get('otherSourceOfRole')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('otherSourceOfRole')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-8">
                    <label for="roleDescription">Please provide a role description for your placement. </label>
                    <small id="helpId" class="text-muted">
                        If you do not have this, please contact the Placement Provider to receive a Role Description before submitting this form.
                    </small>
                    <textarea class="form-control" placeholder="Role Description" type="textarea" id="roleDescription"
                        formControlName="roleDescription"></textarea>
                    <div
                        *ngIf="!authReqForm.get('roleDescription')?.valid && (authReqForm.get('roleDescription')?.dirty || authReqForm.get('roleDescription')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('roleDescription')?.errors?.['required']"
                            class="text-muted">Role description is
                            required</small>
                    </div>
                </div>     
            </div>
        </div>
        <div>
            <hr>
            <h5 class="mb-3">Work Factors</h5>
            <div class="form-group row">
                <div class="col-sm-4">
                    <label for="isWorkFromHome">
                        <span class="required" *ngIf="authReqForm.get('isWorkFromHome')?.errors?.['required']">*</span>
                        Does this role involve working from home/remotely? 
                        (This includes hybrid working)
                    </label>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="radio-inline" for="isWorkFromHome-Yes">
                                <input type="radio" id="isWorkFromHome-Yes" formControlName="isWorkFromHome" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-3">
                            <label class="radio-inline" for="isWorkFromHome-No">
                                <input type="radio" id="isWorkFromHome-No" formControlName="isWorkFromHome" value="No"> No
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row" *ngIf="this.authReqForm.value.isWorkFromHome == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.work_factor?.is_work_from_home == 'Yes')">
                <div class="col-sm-6">
                    <label for="remoteWorkOverview">Please provide an overview of how you will work remotely. This should include how often you will work remotely each week.</label>
                    <textarea class="form-control" placeholder="Please provide the overview" type="date" id="remoteWorkOverview"
                        formControlName="remoteWorkOverview" ></textarea>
                    <div
                        *ngIf="!authReqForm.get('remoteWorkOverview')?.valid && (authReqForm.get('remoteWorkOverview')?.dirty || authReqForm.get('remoteWorkOverview')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('remoteWorkOverview')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-6">
                    <label for="whyItHasRemoteWork">Why does this role involve working from home?<br><br></label>
                    <textarea class="form-control" placeholder="Please provide the reason" type="date" id="whyItHasRemoteWork"
                        formControlName="whyItHasRemoteWork" ></textarea>
                    <div
                        *ngIf="!authReqForm.get('whyItHasRemoteWork')?.valid && (authReqForm.get('whyItHasRemoteWork')?.dirty || authReqForm.get('whyItHasRemoteWork')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('whyItHasRemoteWork')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
            </div> 
        </div>
        <div>
            <hr>
            <h5 class="mb-3">Transport and Travel Factors</h5>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="TravelToPlacement">How will you travel to and from the placement and residence?</label>
                        <small id="helpId" class="text-muted">If you do not know this, please put what you are planning to do</small>
                        <select class="custom-select" formControlName="TravelToPlacement">
                            <option value="" disabled selected>Choose your travel</option>
                            <option *ngFor="let travelWay of travelWaysList" [ngValue]="travelWay">{{travelWay}}</option>
                          </select>
                    <div
                        *ngIf="!authReqForm.get('TravelToPlacement')?.valid && (authReqForm.get('TravelToPlacement')?.dirty || authReqForm.get('TravelToPlacement')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('TravelToPlacement')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.TravelToPlacement == 'Other' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.travel_to_placement == 'Yes')">
                    <label for="OtherTravelToPlacementDescription">Please state how you will travel to placement<br><br></label>
                    <input class="form-control" placeholder="Specify other mode of transport" type="text" id="OtherTravelToPlacementDescription"
                        formControlName="OtherTravelToPlacementDescription" />
                    <div
                        *ngIf="!authReqForm.get('OtherTravelToPlacementDescription')?.valid && (authReqForm.get('OtherTravelToPlacementDescription')?.dirty || authReqForm.get('OtherTravelToPlacementDescription')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('OtherTravelToPlacementDescription')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="isWorkingInDifferentLocation">
                        <span class="required" *ngIf="authReqForm.get('isWorkingInDifferentLocation')?.errors?.['required']">*</span>
                        Does this role involve working at a location different to the Placement Provider’s address that you have given in above section ?</label>
                        <div class="row">
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isWorkingInDifferentLocation-Yes">
                                    <input type="radio" id="isWorkingInDifferentLocation-Yes" formControlName="isWorkingInDifferentLocation" value="Yes">
                                    Yes
                                </label>
                            </div>                    
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isWorkingInDifferentLocation-No">
                                    <input type="radio" id="isWorkingInDifferentLocation-No" formControlName="isWorkingInDifferentLocation" value="No"> No
                                </label>
                            </div>
                        </div>
    
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.isWorkingInDifferentLocation == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.is_working_in_different_location == 'Yes')">
                    <label for="otherAddress">Please provide the different Address</label>
                    <input class="form-control" placeholder="Address" type="text" id="otherAddress"
                        formControlName="otherAddress" />
                    <div
                        *ngIf="!authReqForm.get('otherAddress')?.valid && (authReqForm.get('otherAddress')?.dirty || authReqForm.get('otherAddress')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('otherAddress')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="isRequiredOverseasTravel">
                        <span class="required" *ngIf="authReqForm.get('isRequiredOverseasTravel')?.errors?.['required']">*</span>
                        Does your placement require travel overseas? </label>
                        <div class="mb-sm-2">
                            <small id="helpId" class="text-muted">
                                If you are travelling overseas at the Placement Providers request then the university is not responsible for the
                                travel insurance and it is your employer’s responsibility to risk assess the travel.
                                If you are travelling overseas to attend the placement, then the responsibility is with the university.
                            </small>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isRequiredOverseasTravel-Yes">
                                    <input type="radio" id="isRequiredOverseasTravel-Yes" formControlName="isRequiredOverseasTravel" value="Yes">
                                    Yes
                                </label>
                            </div>
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isRequiredOverseasTravel-No">
                                    <input type="radio" id="isRequiredOverseasTravel-No" formControlName="isRequiredOverseasTravel" value="No"> No
                                </label>
                            </div>
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isRequiredOverseasTravel-Don't-Know">
                                    <input type="radio" id="isRequiredOverseasTravel-Don't-Know" formControlName="isRequiredOverseasTravel" value="Don't Know"> Don't Know
                                </label>
                            </div>
                        </div>
                        <div id="helpId" *ngIf="this.authReqForm.value.isRequiredOverseasTravel == 'Yes'">Please follow 
                            <a class="theme-link" target="_blank" href="https://uniofleicester.sharepoint.com/sites/Insurance/SitePages/Staff-Student-Overseas-Travel.aspx">this link</a> and familiarise yourself with this resource. <br>
                            There are several action points on that page before you travel including: <br>
                            <ul>
                                <li>Student Travel Application Form</li>
                                <li>Contact your school about having a risk assessment conducted</li>
                                <li>Global Health Insurance Card</li>
                            </ul>	
                        </div>
                </div>
            </div>
            <div class="form-group row" *ngIf="this.authReqForm.value.isRequiredOverseasTravel == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.is_required_overseas_travel == 'Yes')">
                <div class="col-sm-4">
                    <label for="hasReadOverseasTravelGuidance">
                        <span class="required" *ngIf="authReqForm.get('hasReadOverseasTravelGuidance')?.errors?.['required']">*</span>
                        Have you read the overseas travel guidance?</label>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasReadOverseasTravelGuidance-Yes">
                                <input type="radio" id="hasReadOverseasTravelGuidance-Yes" formControlName="hasReadOverseasTravelGuidance" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasReadOverseasTravelGuidance-No">
                                <input type="radio" id="hasReadOverseasTravelGuidance-No" formControlName="hasReadOverseasTravelGuidance" value="No"> No
                            </label>
                        </div>
                    </div>
                    <div *ngIf="this.authReqForm.value.hasReadOverseasTravelGuidance == 'No'">
                        <small id="helpId">
                            Please follow 
                            <a class="theme-link" target="_blank" href="https://uniofleicester.sharepoint.com/sites/Insurance/SitePages/Staff-Student-Overseas-Travel.aspx">this link</a> 
                            and familiarise yourself with this resource. There are several action points on that page before you travel</small>
                    </div>
                </div>
                <div class="col-sm-8">
                    <label for="hasConsideredHowToTravelOverseas">
                        <span class="required" *ngIf="authReqForm.get('hasConsideredHowToTravelOverseas')?.errors?.['required']">*</span>
                        Have you considered how you will travel to your country of work and financing this?</label>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasConsideredHowToTravelOverseas-Yes">
                                <input type="radio" id="hasConsideredHowToTravelOverseas-Yes" formControlName="hasConsideredHowToTravelOverseas" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasConsideredHowToTravelOverseas-No">
                                <input type="radio" id="hasConsideredHowToTravelOverseas-No" formControlName="hasConsideredHowToTravelOverseas" value="No"> No
                            </label>
                        </div>
                    </div>

                    <div>
                        <small id="helpId" class="text-muted">Have you considered whether your transport option minimises your carbon footprint? </small>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <hr>
            <h5 class="mb-3">Location and Regional Factors</h5>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="accommodationArrangements">What are your accommodation arrangements when on placement? <br> </label>
                    <small id="helpId" class="text-muted">If you do not know this, please put what you are planning to do.</small>
                    <select class="custom-select" formControlName="accommodationArrangements">
                        <option value="" disabled selected>Choose your accommodation</option>
                        <option *ngFor="let accommodation of accommodationArrangementsList" [ngValue]="accommodation">{{accommodation}}</option>
                      </select>
                    <div
                        *ngIf="!authReqForm.get('accommodationArrangements')?.valid && (authReqForm.get('accommodationArrangements')?.dirty || authReqForm.get('accommodationArrangements')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('accommodationArrangements')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.accommodationArrangements == 'Other' || (this.viewMode == true && this.placementAuthorizationRequest?.location_and_region_factor?.other_accommodation_arrangements == 'Other')">
                    <label for="otherAccommodationArrangements">Other Accommodation Arrangements</label>
                    <br>
                    <input class="form-control" placeholder="Please proivde other arrangements" type="text" id="otherAccommodationArrangements"
                        formControlName="otherAccommodationArrangements" />
                    <div
                        *ngIf="!authReqForm.get('otherAccommodationArrangements')?.valid && (authReqForm.get('otherAccommodationArrangements')?.dirty || authReqForm.get('otherAccommodationArrangements')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('otherAccommodationArrangements')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
                
            </div>
            <div class="form-group row" *ngIf="this.authReqForm.value.isRequiredOverseasTravel== 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.is_required_overseas_travel == 'Yes')">
                <div class="col-sm-12">
                    <label for="hasCheckedWithFCDO">
                        <span class="required" *ngIf="authReqForm.get('hasCheckedWithFCDO')?.errors?.['required']">*</span>
                        Have you checked the 
                        <a class="theme-link" target="_blank" href="https://www.gov.uk/government/organisations/foreign-commonwealth-development-office">
                            Foreign, Commonwealth and Development Office</a> for information on the country of your placement? </label>
                            <div class="row">
                                <div class="col-sm-3">
                                    <label class="radio-inline" for="hasCheckedWithFCDO-Yes">
                                        <input type="radio" id="hasCheckedWithFCDO-Yes" formControlName="hasCheckedWithFCDO" value="Yes">
                                        Yes
                                    </label>
                                </div>                    
                                <div class="col-sm-3">
                                    <label class="radio-inline" for="hasCheckedWithFCDO-No">
                                        <input type="radio" id="hasCheckedWithFCDO-No" formControlName="hasCheckedWithFCDO" value="No"> No
                                    </label>
                                </div>
                            </div>
        
                </div>
                
            </div>
            <div class="form-group row" *ngIf="this.authReqForm.value.isRequiredOverseasTravel== 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.is_required_overseas_travel == 'Yes')">
                <div class="col-sm-6">
                    <label for="isAwareOfAnyRisksAtLocation">
                        <span class="required" *ngIf="authReqForm.get('isAwareOfAnyRisksAtLocation')?.errors?.['required']">*</span>
                        Are you aware of any risks at the organisation’s main location?</label>
                        <div class="row">
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isAwareOfAnyRisksAtLocation-Yes">
                                    <input type="radio" id="isAwareOfAnyRisksAtLocation-Yes" formControlName="isAwareOfAnyRisksAtLocation" value="Yes">
                                    Yes
                                </label>
                            </div>                    
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isAwareOfAnyRisksAtLocation-No">
                                    <input type="radio" id="isAwareOfAnyRisksAtLocation-No" formControlName="isAwareOfAnyRisksAtLocation" value="No"> No
                                </label>
                            </div>
                            <div class="col-sm-3">
                                <label class="radio-inline" for="isAwareOfAnyRisksAtLocation-NA">
                                    <input type="radio" id="isAwareOfAnyRisksAtLocation-NA" formControlName="isAwareOfAnyRisksAtLocation" value="N/A"> No risks
                                </label>
                            </div>
                        </div>
    
                    <div>
                        <small id="helpId" 
                            class="text-muted">For example, this might include civil disorder, crime, environmental disasters, infectious disease, or poor healthcare access (this includes the COVID risk)</small>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.isAwareOfAnyRisksAtLocation == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.location_and_region_factor?.is_aware_of_any_risks_at_location == 'Yes')">
                    <label for="risksAtLocation">Any risks at the location</label>
                    <input class="form-control" placeholder="Provide any risks at the location" type="text" id="risksAtLocation"
                        formControlName="risksAtLocation" />
                    <div
                        *ngIf="!authReqForm.get('risksAtLocation')?.valid && (authReqForm.get('risksAtLocation')?.dirty || authReqForm.get('risksAtLocation')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('risksAtLocation')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <hr>
            <h5 class="mb-3">Health and Environmental Factors</h5>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="isAwareOfPreCautionaryMeasures"><span class="required" *ngIf="authReqForm.get('isAwareOfPreCautionaryMeasures')?.errors?.['required']">*</span>
                        Are you aware of any precautionary measures you are required to undertake before, during, or after the placement?</label>
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isAwareOfPreCautionaryMeasures-Yes">
                                <input type="radio" id="isAwareOfPreCautionaryMeasures-Yes" formControlName="isAwareOfPreCautionaryMeasures" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isAwareOfPreCautionaryMeasures-No">
                                <input type="radio" id="isAwareOfPreCautionaryMeasures-No" formControlName="isAwareOfPreCautionaryMeasures" value="No"> No
                            </label>
                        </div>
                    </div>
                    <div>
                        <small id="helpId"
                            class="text-muted">For example: vaccinations, PPE, medical or dietary advice, living arrangements.</small>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.isAwareOfPreCautionaryMeasures == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.health_factor?.is_aware_of_pre_cautionary_measures == 'Yes')">
                    <label for="preCautionaryMeasures">Pre-cautionary Measures</label>
                    <input class="form-control" placeholder="Provide Pre-cautionary Measures" type="text" id="preCautionaryMeasures"
                        formControlName="preCautionaryMeasures" />
                    <div
                        *ngIf="!authReqForm.get('preCautionaryMeasures')?.valid && (authReqForm.get('preCautionaryMeasures')?.dirty || authReqForm.get('preCautionaryMeasures')?.touched)">
                        <small id="helpId" *ngIf="authReqForm.get('preCautionaryMeasures')?.errors?.['required']"
                            class="text-muted">This info is
                            required</small>
                    </div>
                </div>
                
            </div>
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="hasDownloadedSafeZoneApp">
                        <span class="required" *ngIf="authReqForm.get('hasDownloadedSafeZoneApp')?.errors?.['required']">*</span>
                        Have you downloaded the “SafeZone” app using your university credentials?</label>
                        <div class="row">
                            <div class="col-sm-3">
                                <label class="radio-inline" for="hasDownloadedSafeZoneApp-Yes">
                                    <input type="radio" id="hasDownloadedSafeZoneApp-Yes" formControlName="hasDownloadedSafeZoneApp" value="Yes">
                                    Yes
                                </label>
                            </div>                    
                            <div class="col-sm-3">
                                <label class="radio-inline" for="hasDownloadedSafeZoneApp-No">
                                    <input type="radio" id="hasDownloadedSafeZoneApp-No" formControlName="hasDownloadedSafeZoneApp" value="No"> No
                                </label>
                            </div>
                        </div>
    
                    <div>
                        <small id="helpId" *ngIf="this.authReqForm.value.hasDownloadedSafeZoneApp == 'No'"
                            >Please <a class="theme-link" target="_blank" href="https://le.ac.uk/study/student-support/safezone">follow this link</a> for details on “SafeZone”.</small>
                    </div>
                </div>
                <div class="col-sm-6" *ngIf="this.authReqForm.value.isRequiredOverseasTravel == 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.is_required_overseas_travel == 'Yes')">
                    <label for="hasAppliedGlobalHealthInsuranceCard">
                        <span class="required" *ngIf="authReqForm.get('hasAppliedGlobalHealthInsuranceCard')?.errors?.['required']">*</span>
                        Have you applied for your Global Health Insurance Card?</label>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasAppliedGlobalHealthInsuranceCard-Yes">
                                <input type="radio" id="hasAppliedGlobalHealthInsuranceCard-Yes" formControlName="hasAppliedGlobalHealthInsuranceCard" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasAppliedGlobalHealthInsuranceCard-No">
                                <input type="radio" id="hasAppliedGlobalHealthInsuranceCard-No" formControlName="hasAppliedGlobalHealthInsuranceCard" value="No"> No
                            </label>
                        </div>
                        <div class="col-sm-3">
                            <label class="radio-inline" for="hasAppliedGlobalHealthInsuranceCard-NA">
                                <input type="radio" id="hasAppliedGlobalHealthInsuranceCard-NA" formControlName="hasAppliedGlobalHealthInsuranceCard" value="NA"> N/A (Country not in EU)
                            </label>
                        </div>
                    </div>

                    <div>
                        <small id="helpId" *ngIf="this.authReqForm.value.hasAppliedGlobalHealthInsuranceCard == 'No'">Please <a
                                class="theme-link" target="_blank"
                                href="https://www.nhs.uk/using-the-nhs/healthcare-abroad/apply-for-a-free-uk-global-health-insurance-card-ghic/">follow
                                this link</a>
                        </small>
                    </div>
                </div>
                
            </div>


        </div>
        <div>
            <hr>
            <h5 class="mb-3">Personal Factors</h5>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="hasConsideredAnyAdjustments">
                        <span class="required" *ngIf="authReqForm.get('hasConsideredAnyAdjustments')?.errors?.['required']">*</span>
                        Have you considered any adjustments with your employer that may be required for
                        you to carry out the role relating to any disability or health condition?</label>
                        <div class="mb-2">
                            <small id="helpId" class="text-muted">If you are unsure about this subject, then we recommend you reach out through the
                                <a class="theme-link" target="_blank" href="https://le.ac.uk/accessability-centre">AccessAbility Centre</a></small>
                        </div>

                        <div class="row">
                            <div class="col-sm-2">
                                <label class="radio-inline" for="hasConsideredAnyAdjustments-Yes">
                                    <input type="radio" id="hasConsideredAnyAdjustments-Yes" formControlName="hasConsideredAnyAdjustments" value="Yes">
                                    Yes
                                </label>
                            </div>                    
                            <div class="col-sm-2">
                                <label class="radio-inline" for="hasConsideredAnyAdjustments-No">
                                    <input type="radio" id="hasConsideredAnyAdjustments-No" formControlName="hasConsideredAnyAdjustments" value="No"> No
                                </label>
                            </div>
                            <div class="col-sm-2">
                                <label class="radio-inline" for="hasConsideredAnyAdjustments-NA">
                                    <input type="radio" id="hasConsideredAnyAdjustments-NA" formControlName="hasConsideredAnyAdjustments" value="NA"> N/A
                                </label>
                            </div>
                        </div>
    
                    </div>
            </div>
        </div>
        <div *ngIf="this.authReqForm.value.isRequiredOverseasTravel== 'Yes' || (this.viewMode == true && this.placementAuthorizationRequest?.travel_factor?.is_required_overseas_travel == 'Yes')">
            <hr>
            <h5 class="mb-3">Policies and Insurnace (Overseas Placement)
            </h5>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="isAwareOfTravelRequestForm">
                        <span class="required" *ngIf="authReqForm.get('isAwareOfTravelRequestForm')?.errors?.['required']">*</span>
                        Are you aware that you must submit a Student Travel Application Form once your placement has been approved?</label>
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isAwareOfTravelRequestForm-Yes">
                                <input type="radio" id="isAwareOfTravelRequestForm-Yes" formControlName="isAwareOfTravelRequestForm" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isAwareOfTravelRequestForm-No">
                                <input type="radio" id="isAwareOfTravelRequestForm-No" formControlName="isAwareOfTravelRequestForm" value="No"> No
                            </label>
                        </div>
                    </div>

                    <div>
                        <small id="helpId" *ngIf="this.authReqForm.value.isAwareOfTravelRequestForm == 'No'">
                            Please <a class="theme-link" target="_blank" href="https://uniofleicester.sharepoint.com/sites/Insurance/SitePages/Staff-Student-Overseas-Travel.aspx">follow this link</a> and complete the Student Travel Application Form.</small>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12">
                    <label for="isWorkCountryListedOnRiskAssessmentEscalation">
                        <span class="required" *ngIf="authReqForm.get('isWorkCountryListedOnRiskAssessmentEscalation')?.errors?.['required']">*</span>
                        Is your country of work listed as one that require risk assessment escalation? <small id="helpId" class="text-muted">Please <a class="theme-link" target="_blank" href="https://uniofleicester.sharepoint.com/sites/Insurance/SitePages/Staff-Student-Overseas-Travel.aspx">follow link</a> for the list</small></label>
                        
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isWorkCountryListedOnRiskAssessmentEscalation-Yes">
                                <input type="radio" id="isWorkCountryListedOnRiskAssessmentEscalation-Yes" formControlName="isWorkCountryListedOnRiskAssessmentEscalation" value="Yes">
                                Yes
                            </label>
                        </div>                    
                        <div class="col-sm-2">
                            <label class="radio-inline" for="isWorkCountryListedOnRiskAssessmentEscalation-No">
                                <input type="radio" id="isWorkCountryListedOnRiskAssessmentEscalation-No" formControlName="isWorkCountryListedOnRiskAssessmentEscalation" value="No"> No
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="d-flex justify-content-center" *ngIf="!viewMode">
            <button class="theme-btn m-2" (click)="onSave(); $event.preventDefault()">Save Draft</button>
            <button class="theme-btn m-2" [disabled]="!authReqForm.valid" type="submit">Submit</button>
        </div>
    </form>
</div>